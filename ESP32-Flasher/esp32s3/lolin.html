<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MrDude's Installer for ESP32</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect x='20' y='20' width='60' height='60' fill='none' stroke='white' stroke-width='5'/><rect x='15' y='35' width='10' height='5' fill='white'/><rect x='15' y='45' width='10' height='5' fill='white'/><rect x='15' y='55' width='10' height='5' fill='white'/><rect x='75' y='35' width='10' height='5' fill='white'/><rect x='75' y='45' width='10' height='5' fill='white'/><rect x='75' y='55' width='10' height='5' fill='white'/><rect x='35' y='15' width='5' height='10' fill='white'/><rect x='45' y='15' width='5' height='10' fill='white'/><rect x='55' y='15' width='5' height='10' fill='white'/><rect x='35' y='75' width='5' height='10' fill='white'/><rect x='45' y='75' width='5' height='10' fill='white'/><rect x='55' y='75' width='5' height='10' fill='white'/></svg>">
    <script src="../htmljs/stars.js" defer></script>
    <link rel='stylesheet' href='../css/index2.css'>
</head>
<body>
    <div class="page-card">
        <div class="header">
            <h1>ESP32 Web Installer</h1>
        </div>

        <div class="content">
            <div class="modal-content2">
                <div class="esp32__webusb">
                    <div class="Estilo1">Firmware Flasher for Lolin S3 Pro</div>
                </div>
                <a href="/" class="home-icon" title="Go Home">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                        <polyline points="9 22 9 12 15 12 15 22"></polyline>
                    </svg>
                </a>
                <div class="button-container">
                    <esp-web-install-button manifest="lolin.json"></esp-web-install-button>
                </div>
            </div>
        </div>

        <footer class="footer-card">
            <div class="center">
                <a onclick="openModal()">Flashing Guide</a>
            </div>
        </footer>
    </div>

    <!-- Modal Popup -->
    <div id="infoModal" class="custom-modal" style="display: none;">
        <div class="modal-content">
            <div class="center">
                <div class="modal-header">
                    <div class="modal-icon">ℹ️</div>
                    <h2>Flashing Guide</h2>
                </div>
            </div>
            <div class="modal-body">
                <p>This web installer allows you to flash firmware to your ESP32 device directly from your browser.</p>
                <p><strong>Requirements:</strong></p>
                <ul style="text-align: left; padding-left: 20px;">
                    <li>Chrome/Edge browser (version 89 or newer)</li>
                    <li>ESP32 device in bootloader mode</li>
                    <li>USB connection to your computer</li>
                </ul>
                <p><strong>Instructions:</strong></p>
                <ol style="text-align: left; padding-left: 20px;">
                    <li>Select the desired firmware</li>
                    <li>Connect your ESP32 via USB</li>
                    <li>Put device in bootloader mode:</li>
                </ol>

                <div style="padding-left: 20px; margin-top: -10px; margin-bottom: -10px;">
                    <span style="display: inline-block;">(hold BOOT button, press RESET, release BOOT)</span>
                </div>

                <ol start="4" style="text-align: left; padding-left: 20px;">
                    <li>Click the connect button</li>
                    <li>Select your ESP32 serial port when prompted</li>
                </ol>
                <div class="center">
                    <br><br>
                    <strong>Coded By MrDude</strong>
                </div>
            </div>
            <div class="modal-buttons">
                <button onclick="closeModal()" class="modal-button">OK</button>
            </div>
        </div>
    </div>

    <script type="module" src="/java/web/install-button.js?module"></script>

    <script>
        // Modal functions
        function openModal() {
            const modal = document.getElementById("infoModal");
            modal.style.display = "flex";
            setTimeout(() => modal.classList.add("show"), 10);
        }

        function closeModal() {
            const modal = document.getElementById("infoModal");
            modal.classList.remove("show");
            setTimeout(() => {
                modal.style.display = "none";
            }, 300);
        }

        // Close modal when clicking outside content
        document.addEventListener('click', function (event) {
            const modal = document.getElementById("infoModal");
            if (event.target === modal) {
                closeModal();
            }
        });
    </script>
</body>
</html>